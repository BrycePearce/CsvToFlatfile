import { readFile } from "fs/promises";
import { parseCsv } from "../index.js";

// const loadCsvWithHeaders = async () => {
//     let importedCsv: string;
//     try {
//         importedCsv = await readFile("./testData/zillow.csv", 'utf8')
//     } catch {
//         throw new Error('Failed to load the CSV file.');
//     }

//     if (!importedCsv) return null;

//     const parsedCsv = parseCsv({ csv: importedCsv, hasColumnHeaders: true })
//     console.log('parsedCsv', parsedCsv)
// }

// const loadCsvWithoutHeaders = async () => {
//     let importedCsv: string;
//     try {
//         importedCsv = await readFile("./testData/example.csv", 'utf8')
//     } catch {
//         throw new Error('Failed to load the CSV file.');
//     }

//     if (!importedCsv) return null;

//     const parsedCsv = parseCsv({ csv: importedCsv, hasColumnHeaders: false, columnHeaders: ['date', 'measurementTotal', 'measurement', 'product', 'name', 'deliveryPoint'] })
//     console.log('parsedCsv', parsedCsv)
// }

const loadCsvWithAutoGeneratedHeaders = async () => {
    let importedCsv: string;
    try {
        importedCsv = await readFile("./testData/example.csv", 'utf8')
    } catch {
        throw new Error('Failed to load the CSV file.');
    }

    if (!importedCsv) return null;

    const parsedCsv = parseCsv({ csv: importedCsv, hasColumnHeaders: false })
    console.log('parsedCsv', parsedCsv)
}


// loadCsvWithHeaders()
// loadCsvWithoutHeaders()
loadCsvWithAutoGeneratedHeaders()